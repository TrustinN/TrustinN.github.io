<!DOCTYPE html><html lang="en"><head><meta charSet="UTF-8"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/104cea90dbbc6b7a.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-9edee2920554d0a5.js"/><script src="/_next/static/chunks/4bd1b696-9d53a45aeb6e92ca.js" async=""></script><script src="/_next/static/chunks/517-0c0d3409674fecb6.js" async=""></script><script src="/_next/static/chunks/main-app-794893a4f5078785.js" async=""></script><script src="/_next/static/chunks/173-ef7ddebb9db08982.js" async=""></script><script src="/_next/static/chunks/795-77b345457a57fcf5.js" async=""></script><script src="/_next/static/chunks/app/layout-98844b15afe18919.js" async=""></script><script src="/_next/static/chunks/970-ed0831cff5c90225.js" async=""></script><script src="/_next/static/chunks/app/projects/ComputerGraphics/Project4/page-e4c10408b0cfc977.js" async=""></script><script src="/mathjax/es5/tex-chtml.js" id="MathJax-script" async=""></script><meta http-equiv="X-UA-Compatible" content="IE=edge"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body><div class="flex flex-col h-screen"><header class="items-stretch shadow-[0_5px_15px_rgba(0,0,0,0.35)]"><div class="md:hidden flex flex-row justify-between bg-black text-white relative z-50"><button type="button"></button></div><nav><ul class="flex justify-end bg-black text-center list-none "><li><a class="block p-0 transform scale-90 transition-transform duration-250 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 hover:text-gray-300 focus:text-gray-300 hover:bg-gray-800 w-full h-full" href="/"><div class="flex justify-evenly items-center p-4">Home</div></a></li><li><a class="block p-0 transform scale-90 transition-transform duration-250 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 hover:text-gray-300 focus:text-gray-300 hover:bg-gray-800 w-full h-full" href="/projects"><div class="flex justify-evenly items-center p-4">Projects</div></a></li><li><a class="block p-0 transform scale-90 transition-transform duration-250 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 hover:text-gray-300 focus:text-gray-300 hover:bg-gray-800 w-full h-full" href="/education"><div class="flex justify-evenly items-center p-4">Education</div></a></li><li><a class="block p-0 transform scale-90 transition-transform duration-250 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 hover:text-gray-300 focus:text-gray-300 hover:bg-gray-800 w-full h-full" href="/hobbies"><div class="flex justify-evenly items-center p-4">Hobbies</div></a></li><li><a class="block p-0 transform scale-90 transition-transform duration-250 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 hover:text-gray-300 focus:text-gray-300 hover:bg-gray-800 w-full h-full" href="https://github.com/TrustinN"><div class="flex justify-center items-center w-full h-full"><div class="flex-grow bg-[url(/media/github.png)] bg-contain bg-no-repeat pl-[3.5rem] w-auto h-[70%] bg-center"> </div><div class="pr-4 pl-2">Github</div></div></a></li></ul></nav></header><div class="flex-grow"><div><div class="text-center text-black p-20 row-span-2 row-start-1 row-end-2 flex flex-col flex-nowrap justify-center items-center w-full"><h1>Project 4: Cloth Simulation</h1><p>(https://trustinn.github.io/projects/ComputerGraphics/Project4)</p></div><div class="mx-[5vw]"><div class="flex flex-row flex-nowrap justify-center relative"><div class="flex flex-col flex-grow max-w-[60rem]"><section class="mb-8 mx-[5vw] rounded-[1rem] shadow-[0px_5px_15px_rgba(0,0,0,0.35)] h-fit relative bg-red undefined"><div class="h-fit"><article class="relative z-50 m-0 p-8 text-left max-w-[100%] h-fit rounded-2xl bg-white text-black undefined" id="Overview"><div><h2> Overview </h2><p>In this assignment, I learned about how the mass, spring equations can be used to model structural, shearing, and bending forces on a cloth. Two interesting things was how we can hash a given point into a bin given a subdivision of the space, as an alternative to using a bvh to find collisions, and how shaders can be used to add texture to objects.</p></div></article></div></section><section class="mb-8 mx-[5vw] rounded-[1rem] shadow-[0px_5px_15px_rgba(0,0,0,0.35)] h-fit relative bg-red undefined"><div class="h-fit"><article class="relative z-50 m-0 p-8 text-left max-w-[100%] h-fit rounded-2xl bg-white text-black undefined" id="Masses and Springs"><div><h2> Masses and Springs</h2><p>For the implementation, I did a double for loop over the number of points along the width and height. Then we can do a bounds check to see if we can add a spring corresponding to the given forces:<ul><li>The structural forces on the cloth are given as a spring from a point mass to the point mass above as well as one to the left.</li>The shearing forces on the cloth are given as a spring from a point mass to the upper left and upper right.<li></li><li>The bending forces on the cloth are given as a spring from a point mass to the point mass two above as well as one two away on the left.</li></ul>For the following images, st represents structural springs, sh for shearing, and bd for bending:</p><div class="grid grid-cols-3 gap-4 items-center justify-center w-full max-w-[90%] mx-auto py-4 undefined"><figure class="text-center w-full"><img alt="Cloth pinned at two points with st+sh+bd forces" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part1/pinned2_st+sh+bd.png"/><figcaption> Spring types: <!-- -->st+sh+bd</figcaption></figure><figure class="text-center w-full"><img alt="Cloth pinned at two points with st+bd forces" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part1/pinned2_st+bd.png"/><figcaption> Spring types: <!-- -->st+bd</figcaption></figure><figure class="text-center w-full"><img alt="Cloth pinned at two points with sh forces" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part1/pinned2_sh.png"/><figcaption> Spring types: <!-- -->sh</figcaption></figure></div></div></article></div></section><section class="mb-8 mx-[5vw] rounded-[1rem] shadow-[0px_5px_15px_rgba(0,0,0,0.35)] h-fit relative bg-red undefined"><div class="h-fit"><article class="relative z-50 m-0 p-8 text-left max-w-[100%] h-fit rounded-2xl bg-white text-black undefined" id="Simulation"><div><h2>Simulation </h2><p>To simulate the forces on the cloth, we first initialize the total force on each point mass to be the sum of<span style="display:inline">\(F = m \cdot a\)</span> where<!-- --> <span style="display:inline">\(a\)</span> is a given acceleration in a list of external accelerations. Next, we loop over each spring, and calculate the magnitude of the force:<span style="display:inline">\begin{equation*} F_{s} = k_{s} \cdot (\lVert p_{a} - p_{b} \rVert - l) \end{equation*} </span>Then the force of the spring on<!-- --> <span style="display:inline">\(p_{a}\)</span> would be a vector in the direction of <span style="display:inline">\(p_{b}\)</span> of magnitude <span style="display:inline">\(F_s\)</span>.</p><p>Here is what the cloth looks like when we add these forces:</p><div class="grid grid-cols-2 gap-4 items-center justify-center w-full max-w-[90%] mx-auto py-4 undefined"><figure class="text-center w-full"><img alt="Cloth resting state when pinned at four corners" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part2/pinned4.png"/><figcaption>Cloth pinned at 4 corners</figcaption></figure><figure class="text-center w-full"><img alt="Cloth resting state when pinned at two corners" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part2/pinned2.png"/><figcaption>Cloth pinned at 2 corners</figcaption></figure></div><p>The following images illustrate how varying the parameters of the cloth can affect the cloth:</p><div class="grid grid-cols-3 gap-4 items-center justify-center w-full max-w-[90%] mx-auto py-4 undefined"><figure class="text-center w-full"><img alt="Sphere, cloth collision with ks = 500, density = 15, damping = .2" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part2/sphere_ks_500+density_15+damp_.2.png"/><figcaption><span style="display:inline">\(K_s\)</span>= <!-- -->500<!-- -->, Density = <!-- -->15<!-- --> <span style="display:inline">\(\frac{g}{m^2}\)</span>, Damping = <!-- -->.2<!-- -->%</figcaption></figure><figure class="text-center w-full"><img alt="Sphere, cloth collision with ks = 5000, density = 15, damping = .2" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part2/sphere_ks_5000+density_15+damp_.2.png"/><figcaption><span style="display:inline">\(K_s\)</span>= <!-- -->5000<!-- -->, Density = <!-- -->15<!-- --> <span style="display:inline">\(\frac{g}{m^2}\)</span>, Damping = <!-- -->.2<!-- -->%</figcaption></figure><figure class="text-center w-full"><img alt="Sphere, cloth collision with ks = 50000, density = 15, damping = .2" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part2/sphere_ks_50000+density_15+damp_.2.png"/><figcaption><span style="display:inline">\(K_s\)</span>= <!-- -->50000<!-- -->, Density = <!-- -->15<!-- --> <span style="display:inline">\(\frac{g}{m^2}\)</span>, Damping = <!-- -->.2<!-- -->%</figcaption></figure><figure class="text-center w-full"><img alt="Sphere, cloth collision with ks = 5000, density = 5, damping = .2" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part2/sphere_ks_5000+density_5+damp_.2.png"/><figcaption><span style="display:inline">\(K_s\)</span>= <!-- -->5000<!-- -->, Density = <!-- -->5<!-- --> <span style="display:inline">\(\frac{g}{m^2}\)</span>, Damping = <!-- -->.2<!-- -->%</figcaption></figure><figure class="text-center w-full"><img alt="Sphere, cloth collision with ks = 5000, density = 15, damping = .2" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part2/sphere_ks_5000+density_15+damp_.2.png"/><figcaption><span style="display:inline">\(K_s\)</span>= <!-- -->5000<!-- -->, Density = <!-- -->15<!-- --> <span style="display:inline">\(\frac{g}{m^2}\)</span>, Damping = <!-- -->.2<!-- -->%</figcaption></figure><figure class="text-center w-full"><img alt="Sphere, cloth collision with ks = 5000, density = 45, damping = .2" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part2/sphere_ks_5000+density_45+damp_.2.png"/><figcaption><span style="display:inline">\(K_s\)</span>= <!-- -->5000<!-- -->, Density = <!-- -->45<!-- --> <span style="display:inline">\(\frac{g}{m^2}\)</span>, Damping = <!-- -->.2<!-- -->%</figcaption></figure><figure class="text-center w-full"><img alt="Sphere, cloth collision with ks = 5000, density = 15, damping = .0" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part2/sphere_ks_5000+density_15+damp_.0.png"/><figcaption><span style="display:inline">\(K_s\)</span>= <!-- -->5000<!-- -->, Density = <!-- -->15<!-- --> <span style="display:inline">\(\frac{g}{m^2}\)</span>, Damping = <!-- -->.0<!-- -->%</figcaption></figure><figure class="text-center w-full"><img alt="Sphere, cloth collision with ks = 5000, density = 15, damping = .2" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part2/sphere_ks_5000+density_15+damp_.2.png"/><figcaption><span style="display:inline">\(K_s\)</span>= <!-- -->5000<!-- -->, Density = <!-- -->15<!-- --> <span style="display:inline">\(\frac{g}{m^2}\)</span>, Damping = <!-- -->.2<!-- -->%</figcaption></figure><figure class="text-center w-full"><img alt="Sphere, cloth collision with ks = 5000, density = 15, damping = 1" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part2/sphere_ks_5000+density_15+damp_1.png"/><figcaption><span style="display:inline">\(K_s\)</span>= <!-- -->5000<!-- -->, Density = <!-- -->15<!-- --> <span style="display:inline">\(\frac{g}{m^2}\)</span>, Damping = <!-- -->1<!-- -->%</figcaption></figure></div><p>I noticed that as the spring constant increases, the cloth became stiffer where a spring constant of<!-- --> <span style="display:inline">\(50000\)</span> made the cloth resistant to folding. A higher density had a similar but inverse effect. Finally, decreasing the damping of the cloth made the collision with the sphere stronger. For the change in damping, the images were captured as the edges of the cloth were falling, and in the low damping picture, the cloth springs back up while for high damping, the cloth drapes down softly.</p></div></article></div></section><section class="mb-8 mx-[5vw] rounded-[1rem] shadow-[0px_5px_15px_rgba(0,0,0,0.35)] h-fit relative bg-red undefined"><div class="h-fit"><article class="relative z-50 m-0 p-8 text-left max-w-[100%] h-fit rounded-2xl bg-white text-black undefined" id="Collisions with Spheres and Planes"><div><h2>Collisions with Spheres and Planes </h2><p>For collisions with spheres, we calculate if the new position of the point mass is within the radius distance from the sphere&#x27;s origin. If the new position is inside the sphere, we move along the origin-point mass ray to bump the position to the surface of the sphere. Adding in friction, this corrects the position of the point mass.</p><div class="grid grid-cols-3 gap-4 items-center justify-center w-full max-w-[90%] mx-auto py-4 undefined"><figure class="text-center w-full"><img alt="Sphere collision with ks = 500" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part3/sphere_ks_500.png"/><figcaption> <span style="display:inline">\(K_s\)</span> = <!-- -->500</figcaption></figure><figure class="text-center w-full"><img alt="Sphere collision with ks = 5000" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part3/sphere_ks_5000.png"/><figcaption> <span style="display:inline">\(K_s\)</span> = <!-- -->5000</figcaption></figure><figure class="text-center w-full"><img alt="Sphere collision with ks = 50000" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part3/sphere_ks_50000.png"/><figcaption> <span style="display:inline">\(K_s\)</span> = <!-- -->50000</figcaption></figure></div><p>From the images, a higher spring constant makes the cloth stiffer and more resistant to folding. This makes sense as a higher spring constant means the spring pulls the point masses together with greater force.</p><p>For collisions with a plane, we check if the new position of the point mass is on the same side as that of the last position of the point mass. This is done using the check that:<span style="display:block"> \begin{equation*} (pm.pos - plane.p) \cdot n * (pm.lastpos - plane.p) \cdot n &lt;= 0 \end{equation*} </span>If the path intersects the plane object, we calculate the intersection which becomes the corrected position of the point mass.</p><div class="grid grid-cols-1 gap-4 items-center justify-center w-full mx-auto py-4 max-w-[35rem]"><figure class="text-center w-full"><img alt="Plane collision" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part3/plane.png"/></figure></div></div></article></div></section><section class="mb-8 mx-[5vw] rounded-[1rem] shadow-[0px_5px_15px_rgba(0,0,0,0.35)] h-fit relative bg-red undefined"><div class="h-fit"><article class="relative z-50 m-0 p-8 text-left max-w-[100%] h-fit rounded-2xl bg-white text-black undefined" id="Self Collisions"><div><h2>Self Collisions</h2><p>We would only need to correct for collision of the cloth with itself if the point mass is within<!-- --> <span style="display:inline">\(2 \cdot thickness\)</span> where<!-- --> <span style="display:inline">\(thickness\)</span> is the thickness of the cloth. In fixing the position at the collision, we would move along the ray joining the two point masses and set the new position of the point to be<!-- --> <span style="display:inline">\(2 \cdot thickness\)</span> away from the other point mass.</p><div class="grid grid-cols-3 gap-4 items-center justify-center w-full max-w-[90%] mx-auto py-4 undefined"><figure class="text-center w-full"><img alt="Self-collision at step: start" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part4/self_collide_start.png"/><figcaption>Time: <!-- -->start</figcaption></figure><figure class="text-center w-full"><img alt="Self-collision at step: mid" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part4/self_collide_mid.png"/><figcaption>Time: <!-- -->mid</figcaption></figure><figure class="text-center w-full"><img alt="Self-collision at step: end" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part4/self_collide_end.png"/><figcaption>Time: <!-- -->end</figcaption></figure></div><p>Varying the density of the cloth, a higher density tends to the leave the bottom of the cloth more scrunched up with the plane:</p><div class="grid grid-cols-3 gap-4 items-center justify-center w-full max-w-[90%] mx-auto py-4 undefined"><figure class="text-center w-full"><img alt="Self-collision with density set to 5" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part4/self_collide_density_5.png"/><figcaption>Density: <!-- -->5<!-- --> <span style="display:inline">\(\frac{g}{m^2}\)</span></figcaption></figure><figure class="text-center w-full"><img alt="Self-collision with density set to 15" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part4/self_collide_density_15.png"/><figcaption>Density: <!-- -->15<!-- --> <span style="display:inline">\(\frac{g}{m^2}\)</span></figcaption></figure><figure class="text-center w-full"><img alt="Self-collision with density set to 45" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part4/self_collide_density_45.png"/><figcaption>Density: <!-- -->45<!-- --> <span style="display:inline">\(\frac{g}{m^2}\)</span></figcaption></figure></div><p>As for the spring constant, a higher spring constant makes the cloth more resistant to wrinkling:</p><div class="grid grid-cols-3 gap-4 items-center justify-center w-full max-w-[90%] mx-auto py-4 undefined"><figure class="text-center w-full"><img alt="Self-collision with ks set to 500" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part4/self_collide_ks_500.png"/><figcaption><span style="display:inline">\(K_s\)</span>: <!-- -->500</figcaption></figure><figure class="text-center w-full"><img alt="Self-collision with ks set to 5000" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part4/self_collide_ks_5000.png"/><figcaption><span style="display:inline">\(K_s\)</span>: <!-- -->5000</figcaption></figure><figure class="text-center w-full"><img alt="Self-collision with ks set to 50000" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part4/self_collide_ks_50000.png"/><figcaption><span style="display:inline">\(K_s\)</span>: <!-- -->50000</figcaption></figure></div></div></article></div></section><section class="mb-8 mx-[5vw] rounded-[1rem] shadow-[0px_5px_15px_rgba(0,0,0,0.35)] h-fit relative bg-red undefined"><div class="h-fit"><article class="relative z-50 m-0 p-8 text-left max-w-[100%] h-fit rounded-2xl bg-white text-black undefined" id="Shaders"><div><h2> Shaders </h2><p>Shaders run parallel to the simulation program and are composed of two parts called the vertex shader and fragment shader. The vertex shader modifies the normals and position of a vertex to set its final position and as input for the fragment shader. The fragment shader computes the color at a vertex to get the final color. The output of both are interpolated in the mesh to color the object.</p><h3>Blinn-Phong Shading</h3><p>In Blinn-Phong Shading, there are three components: diffuse lighting, ambient lighting, and specular highlights. Ambient lighting is given by the base color of the object:<span style="display:block">\begin{equation*} L_a = c \cdot k_s \cdot I_a \end{equation*}</span>Diffuse lighting is given by the luminance from the object as a function of the light position and the angle of the surface:<span style="display:block">\begin{equation*} L_d = c \cdot k_d (I / r^2) \max{n \cdot l, 0} \end{equation*}</span>Where <span style="display:inline">\(l\)</span> is the unit vector in the direction of light from the surface point. Finally, specular highlights are given by:<span style="display:block">\begin{equation*} L_s = c \cdot k_s (I / r^2) \max{n \cdot h, 0}^p\end{equation*}</span></p><div class="grid grid-cols-2 gap-4 items-center justify-center w-full max-w-[90%] mx-auto py-4 undefined"><figure class="text-center w-full"><img alt="Blinn-Phong shading with ambient" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part5/blinn-phong_ambient.png"/><figcaption>Lighting: ambient</figcaption></figure><figure class="text-center w-full"><img alt="Blinn-Phong shading with diffuse" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part5/blinn-phong_diffuse.png"/><figcaption>Lighting: diffuse</figcaption></figure><figure class="text-center w-full"><img alt="Blinn-Phong shading with specular" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part5/blinn-phong_specular.png"/><figcaption>Lighting: specular</figcaption></figure><figure class="text-center w-full"><img alt="Blinn-Phong shading with all" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part5/blinn-phong_all.png"/><figcaption>Lighting: all</figcaption></figure></div><p>For the ambient lighting, I used the values:<!-- --> <span style="display:inline">\(k_a = 1., I_a = (.2, .2, .2)\)</span>. For diffuse lighting, I used<!-- --> <span style="display:inline">\(k_d = .7\)</span>, and finally, for specular, I used<!-- --> <span style="display:inline">\(k_s = .5, p = 5\)</span>.</p><h3>Texture Mapping</h3><p>For the texture mapping, we are given a<!-- --> <span style="display:inline">\(uv\)</span>-coordinate in the frag file and can call the texture function to sample from the texture. The output of this function is the color of the vertex.</p><div class="grid grid-cols-1 gap-4 items-center justify-center w-full mx-auto py-4 max-w-[35rem]"><img alt="Cloth with texture mapping shader" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="w-full" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part5/texture.png"/></div><h3>Bump Mapping</h3><p>In bump mapping, we compute the height of a vertex by a function given the <span style="display:inline">\(uv\)</span>-coordinates<!-- --> <span style="display:inline">\(h(u, v)\)</span>. To recompute the normal of the vertex given the height, we compute the change in height wrt to <span style="display:inline">\(du, dv\)</span> given as:<span style="display:inline">\begin{align*} dU &amp;= (h(u + 1 / w, v) - h(u, v)) \cdot k_{h} \cdot h_{k} \\ dV &amp;= (h(u, v + 1 / h) - h(u, v)) \cdot k_{h} \cdot k_{n}   \end{align*} </span>Where <span style="display:inline">\(k_h, k_n\)</span> are scaling factors for the height and normal respectively. The modified normal is given by a linear combination of the tangent, bitangent, and normal vector to the vertex:<span style="display:inline">\begin{equation*} \begin{bmatrix} \mid    &amp; \mid    &amp; \mid    \\ \vec{T} &amp; \vec{B} &amp; \vec{N} \\ \mid    &amp; \mid    &amp; \mid      \end{bmatrix} \begin{bmatrix} -dU \\ -dV \\ 1     \end{bmatrix} \end{equation*} </span>In the following simulation, I used the fourth texture from the given texture folder</p><div class="grid grid-cols-1 gap-4 items-center justify-center w-full mx-auto py-4 max-w-[35rem]"><img alt="Cloth with bump mapping shader" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="w-full" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part5/bump.png"/></div><div class="grid grid-cols-2 gap-4 items-center justify-center w-full max-w-[90%] mx-auto py-4 undefined"><figure class="text-center w-full"><img alt="Bump mapping with sphere coarseness = 16" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part5/bump16.png"/><figcaption>Bump coarseness: <!-- -->16</figcaption></figure><figure class="text-center w-full"><img alt="Bump mapping with sphere coarseness = 128" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part5/bump128.png"/><figcaption>Bump coarseness: <!-- -->128</figcaption></figure></div><p>From the images above, a lower coarseness makes the bump mapping less jagged and more consistent. In the picture where the coarseness is set to 16, the surface of the sphere is not as smooth, so the bump mapping gets messed up.</p><h3>Displacement Mapping</h3><p>Displacement mapping adds on to bump mapping in that we modify the vertex&#x27; position by the recomputed normal. The new position is given by:<span style="display:inline">\begin{equation*} p^{\prime} = p + n \cdot h(u, v) \cdot k_{h} \end{equation*}</span>In the following simulation, I used the fourth texture from the given texture folder</p><div class="grid grid-cols-1 gap-4 items-center justify-center w-full mx-auto py-4 max-w-[35rem]"><img alt="Cloth with displacement mapping shader" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="w-full" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part5/displacement.png"/></div><p> Here is an adjustment of the coarseness of the sphere mesh: </p><div class="grid grid-cols-2 gap-4 items-center justify-center w-full max-w-[90%] mx-auto py-4 undefined"><figure class="text-center w-full"><img alt="Displacement mapping with sphere coarseness = 16" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part5/displacement16.png"/><figcaption>Displacement coarseness: <!-- -->16</figcaption></figure><figure class="text-center w-full"><img alt="Displacement mapping with sphere coarseness = 128" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part5/displacement128.png"/><figcaption>Displacement coarseness: <!-- -->128</figcaption></figure></div><p>For the sphere mesh on the right with more points, the indentation on the sphere at certain squares is more visible, and we can see this when looking at the silhouette of the sphere. With the more coarse mesh, the indentation is lost and the surface is less detailed. Hover over the images to zoom-in.</p><h3> Bump/Displacement Mapping Comparison</h3><p>I would say that bump mapping is more effective than displacement mapping for applying texture, because the vertex positions are not very consistent with the height map. In the displacement image, the silhouette of the object contains a straight edges compared to that of the rounded one in the bump mapping.</p><h3>Mirror Shader</h3><p>The mirror shader uses a cube map to get the color that is reflected on the surface from the environment. The ray is cast from the camera, and to get the incident ray, we first compute the projection vector of the camera ray <span style="display:inline">\(r_c\)</span> onto the vertex normal <span style="display:inline">\(\vec{n}\)</span> and add it scaled by a factor of 2 to our camera ray:<span style="display:inline">\begin{equation*} w_o = 2\cdot \text{proj}_{r_{c}}(\vec{n}) + r_{c} \end{equation*} </span>Then we can sample the cube map given the direction vector to get the color of the vertex.</p><div class="grid grid-cols-2 gap-4 items-center justify-center w-full max-w-[90%] mx-auto py-4 undefined"><figure class="text-center w-full"><img alt="Mirror ball" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part5/mirror_ball.png"/><figcaption>Mirror Ball</figcaption></figure><figure class="text-center w-full"><img alt="Mirror cloth with sphere collision" loading="lazy" width="2048" height="1600" decoding="async" data-nimg="1" class="zoom-in w-full text-center" style="color:transparent" src="/projects/ComputerGraphics/Project4/media/part5/mirror_cloth.png"/><figcaption>Mirror Cloth</figcaption></figure></div></div></article></div></section></div><div class="block flex-grow max-w-[25%]"><div class="max-w-[80%] mx-auto h-full"><div class="sticky top-[20%] p-4 pl-6 border-1 border-black border-solid rounded-[1rem] bg-black shadow-[0px_5px_15px_rgba(0,0,0,0.35)] h-auto  max-h-[60vh] overflow-y-auto "><nav><ul><a class="block scale-90 hover:text-slate-300 transition-transform  duration-100 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 " href="#Overview">Overview</a></ul><ul><a class="block scale-90 hover:text-slate-300 transition-transform  duration-100 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 " href="#Masses and Springs">Masses and Springs</a></ul><ul><a class="block scale-90 hover:text-slate-300 transition-transform  duration-100 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 " href="#Simulation">Simulation</a></ul><ul><a class="block scale-90 hover:text-slate-300 transition-transform  duration-100 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 " href="#Collisions with Spheres and Planes">Collisions with Spheres and Planes</a></ul><ul><a class="block scale-90 hover:text-slate-300 transition-transform  duration-100 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 " href="#Self Collisions">Self Collisions</a></ul><ul><a class="block scale-90 hover:text-slate-300 transition-transform  duration-100 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 " href="#Shaders">Shaders</a></ul></nav></div></div></div></div></div></div></div><footer class="w-full bg-black text-center p-4 text-white shadow-[0_-5px_15px_rgba(0,0,0,0.35)]"><div>&lt;&lt;&lt; Â© Trustin Nguyen &gt;&gt;&gt;</div><div><a class="text-white hover:text-gray-300 hover:scale-100 focus:text-gray-300 focus:scale-100" href="#"> <!-- -->Back to Top<!-- --> </a></div></footer></div><script src="/_next/static/chunks/webpack-9edee2920554d0a5.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[4547,[],\"ClientSegmentRoot\"]\n3:I[7249,[\"173\",\"static/chunks/173-ef7ddebb9db08982.js\",\"795\",\"static/chunks/795-77b345457a57fcf5.js\",\"177\",\"static/chunks/app/layout-98844b15afe18919.js\"],\"default\"]\n4:I[5244,[],\"\"]\n5:I[3866,[],\"\"]\n7:I[7033,[],\"ClientPageRoot\"]\n8:I[6105,[\"173\",\"static/chunks/173-ef7ddebb9db08982.js\",\"795\",\"static/chunks/795-77b345457a57fcf5.js\",\"970\",\"static/chunks/970-ed0831cff5c90225.js\",\"880\",\"static/chunks/app/projects/ComputerGraphics/Project4/page-e4c10408b0cfc977.js\"],\"default\"]\nb:I[6213,[],\"OutletBoundary\"]\nd:I[6213,[],\"MetadataBoundary\"]\nf:I[6213,[],\"ViewportBoundary\"]\n11:I[4835,[],\"\"]\n:HL[\"/_next/static/css/104cea90dbbc6b7a.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"yNRfib7r0PyhK5agfOt7d\",\"p\":\"\",\"c\":[\"\",\"projects\",\"ComputerGraphics\",\"Project4\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"projects\",{\"children\":[\"ComputerGraphics\",{\"children\":[\"Project4\",{\"children\":[\"__PAGE__\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/104cea90dbbc6b7a.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L2\",null,{\"Component\":\"$3\",\"slots\":{\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[],[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]},\"params\":{},\"promise\":\"$@6\"}]]}],{\"children\":[\"projects\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"projects\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"ComputerGraphics\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"projects\",\"children\",\"ComputerGraphics\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"Project4\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"projects\",\"children\",\"ComputerGraphics\",\"children\",\"Project4\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[[\"$\",\"$L7\",null,{\"Component\":\"$8\",\"searchParams\":{},\"params\":\"$0:f:0:1:1:props:children:1:props:params\",\"promises\":[\"$@9\",\"$@a\"]}],null,[\"$\",\"$Lb\",null,{\"children\":\"$Lc\"}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"BcaYFyBwaPjdM_pGjxLK-\",{\"children\":[[\"$\",\"$Ld\",null,{\"children\":\"$Le\"}],[\"$\",\"$Lf\",null,{\"children\":\"$L10\"}],null]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$11\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"6:{}\n9:{}\na:{}\n"])</script><script>self.__next_f.push([1,"10:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\ne:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"link\",\"1\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}]]\n"])</script><script>self.__next_f.push([1,"c:null\n"])</script></body></html>