<!DOCTYPE html><html lang="en"><head><meta charSet="UTF-8"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/c1338e482ffbff7c.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-9edee2920554d0a5.js"/><script src="/_next/static/chunks/4bd1b696-9d53a45aeb6e92ca.js" async=""></script><script src="/_next/static/chunks/517-0c0d3409674fecb6.js" async=""></script><script src="/_next/static/chunks/main-app-794893a4f5078785.js" async=""></script><script src="/_next/static/chunks/795-77b345457a57fcf5.js" async=""></script><script src="/_next/static/chunks/app/layout-232717e26759a58b.js" async=""></script><script src="/_next/static/chunks/173-ef7ddebb9db08982.js" async=""></script><script src="/_next/static/chunks/970-ed0831cff5c90225.js" async=""></script><script src="/_next/static/chunks/app/projects/SpatialIndexing/page-75a073aafc703aca.js" async=""></script><script src="/mathjax/es5/tex-chtml.js" id="MathJax-script" async=""></script><meta http-equiv="X-UA-Compatible" content="IE=edge"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body><div class="flex flex-col h-screen"><header class="items-stretch shadow-[0_5px_15px_rgba(0,0,0,0.35)]"><div class="md:hidden flex flex-row justify-between bg-black text-white relative z-50"><button type="button"></button></div><nav><ul class="flex justify-end bg-black text-center list-none "><li><a class="block p-0 transform scale-90 transition-transform duration-250 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 hover:text-gray-300 focus:text-gray-300 hover:bg-gray-800 w-full h-full" href="/"><div class="flex justify-evenly items-center p-4">Home</div></a></li><li><a class="block p-0 transform scale-90 transition-transform duration-250 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 hover:text-gray-300 focus:text-gray-300 hover:bg-gray-800 w-full h-full" href="/projects/"><div class="flex justify-evenly items-center p-4">Projects</div></a></li><li><a class="block p-0 transform scale-90 transition-transform duration-250 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 hover:text-gray-300 focus:text-gray-300 hover:bg-gray-800 w-full h-full" href="/education/"><div class="flex justify-evenly items-center p-4">Education</div></a></li><li><a class="block p-0 transform scale-90 transition-transform duration-250 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 hover:text-gray-300 focus:text-gray-300 hover:bg-gray-800 w-full h-full" href="/hobbies/"><div class="flex justify-evenly items-center p-4">Hobbies</div></a></li><li><a class="block p-0 transform scale-90 transition-transform duration-250 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 hover:text-gray-300 focus:text-gray-300 hover:bg-gray-800 w-full h-full" href="https://github.com/TrustinN"><div class="flex justify-center items-center w-full h-full"><div class="flex-grow bg-[url(/media/github.png)] bg-contain bg-no-repeat pl-[3.5rem] w-auto h-[70%] bg-center"> </div><div class="pr-4 pl-2">Github</div></div></a></li></ul></nav></header><div class="flex-grow"><div><div class="text-center text-black p-20 row-span-2 row-start-1 row-end-2 flex flex-col flex-nowrap justify-center items-center w-full"><h1>Spatial Indexing</h1></div><div class="mx-[5vw]"><div class="flex flex-row flex-nowrap justify-center relative"><div class="flex flex-col flex-grow max-w-[60rem]"><section class="mb-8 mx-[5vw] rounded-[1rem] shadow-[0px_5px_15px_rgba(0,0,0,0.35)] h-fit relative bg-red undefined"><div class="h-fit"><article class="relative z-50 m-0 p-8 text-left max-w-[100%] h-fit rounded-2xl bg-white text-black undefined" id="What are They?"><div><h2>What are They?</h2><p>Indexing often describes methods of storing and organizing large amounts of data. In this case, spatial indexing is for the storage and querying of large amounts of spatial data, typically used in path planning and navigation. For example, map applications can store registered location data to provide the user with nearby attractions/restaurants they may want to visit.</p><p>Spatial trees can be of different types, some are balanced trees (R-Trees) where they try to minimize tree depth. Others are adaptive and bound the number of children per tree node (Quad-trees, Octrees, ...).</p></div></article></div></section><section class="mb-8 mx-[5vw] rounded-[1rem] shadow-[0px_5px_15px_rgba(0,0,0,0.35)] h-fit relative bg-red undefined"><div class="h-fit"><article class="relative z-50 m-0 p-8 text-left max-w-[100%] h-fit rounded-2xl bg-white text-black undefined" id="R-Trees"><div><h2>R-Trees</h2><p>For my project, I chose to implement an RTree compared to other spatial indexing methods such as K-D trees/Octrees for its ability to store not only points but higher-dimensional objects.</p><div class="grid grid-cols-1 gap-4 items-center justify-center w-full max-w-[90%] mx-auto py-4 undefined"><img alt="rtree-2d-insert" loading="lazy" width="1150" height="850" decoding="async" data-nimg="1" class="w-full" style="color:transparent" src="/projects/SpatialIndexing/media/rtree-2d-insert.png"/></div></div></article></div></section><section class="mb-8 mx-[5vw] rounded-[1rem] shadow-[0px_5px_15px_rgba(0,0,0,0.35)] h-fit relative bg-red undefined"><div class="h-fit"><article class="relative z-50 m-0 p-8 text-left max-w-[100%] h-fit rounded-2xl bg-white text-black undefined" id="IndexRecords and IndexPointers"><div><h2>IndexRecords and IndexPointers</h2><p>The tree stores objects called index records and index pointers, both of which are a type of rtree entry. This means they contain information on their bounding box. The only difference is that index pointers are stored in the non leaf nodes while index records are stored in the leaf nodes.</p><p>Each index record is of the form:<!-- --> <span style="display:block">\begin{equation*} (\text{id}, \text{bounding box}) \end{equation*}</span> <!-- -->where id is the id of the item we want to store and the bounding box is an array of tuples:<!-- --> <span style="display:block">\begin{equation*} [(a_{1}, b_{1}), \ldots, (a_{n}, b_{n})] \end{equation*}</span> <!-- -->where in the <span style="display:inline">\(i\)</span>-th dimension, the point location<!-- --> <span style="display:inline">\(p_{i}\)</span> on the object is such that:<span style="display:block">\begin{equation*} a_{i} \leq p_{i} \leq b_{i} \end{equation*}</span></p><div class="grid grid-cols-1 gap-4 items-center justify-center w-full max-w-[90%] mx-auto py-4 undefined"><img alt="rtree-structure" loading="lazy" width="800" height="320" decoding="async" data-nimg="1" class="w-full" style="color:transparent" src="/projects/SpatialIndexing/media/rtree-structure.png"/></div><p>An index pointer also has bounding box and also points to either a leaf node or a branch node</p></div></article></div></section><section class="mb-8 mx-[5vw] rounded-[1rem] shadow-[0px_5px_15px_rgba(0,0,0,0.35)] h-fit relative bg-red undefined"><div class="h-fit"><article class="relative z-50 m-0 p-8 text-left max-w-[100%] h-fit rounded-2xl bg-white text-black undefined" id="Leaf/Branch Nodes"><div><h2>Leaf Nodes and Branch Nodes</h2><p>These are the nodes that store the index records and index pointers of the tree. Leaf nodes store an array of index records while branch nodes store an array of index pointers.</p></div></article></div></section><section class="mb-8 mx-[5vw] rounded-[1rem] shadow-[0px_5px_15px_rgba(0,0,0,0.35)] h-fit relative bg-red undefined"><div class="h-fit"><article class="relative z-50 m-0 p-8 text-left max-w-[100%] h-fit rounded-2xl bg-white text-black undefined" id="R-Tree Insert"><div><h2>The Insert Algorithm</h2><p>In growing the tree, we want to ensure that there is as little bound overlap between bounds as possible between neighboring nodes. This way, searching for a node becomes easier if there is less bound overlap.</p><h3>Choose Leaf</h3><p>We first explore down the tree finding the best node to insert into at each level. This is determined by the<code> ChooseLeaf </code> function, which picks a leaf that results in the least bound expansion if we were to insert our index record.</p><p>Once we have found our leaf node, we insert the index record, and propagate the change upwards, updating the tree bounds of the leaf node, branch nodes, and index pointers that we traversed.</p><h3>Splitting the Tree</h3><p>If insertion into the leaf node results in the number of children exceeding a chosen max size, we split the node into two leaf nodes. The children are redistributed among the leaf nodes and again, changes are propagated upwards. This propagation can cause subsequent splits to happen.</p><p>If the root node splits, we create a new root and set the split nodes as the new root&#x27;s children</p></div></article></div></section><section class="mb-8 mx-[5vw] rounded-[1rem] shadow-[0px_5px_15px_rgba(0,0,0,0.35)] h-fit relative bg-red undefined"><div class="h-fit"><article class="relative z-50 m-0 p-8 text-left max-w-[100%] h-fit rounded-2xl bg-white text-black undefined" id="Splitting Nodes"><div><h2>Splitting the Node</h2><p>Finding a good split is difficult to accomplish efficintly, as the new nodes must share as little bound overlap as possible. There are two methods of splits that provide similar results. These are the Linear and Quadratic splits, which involve picking two seeds/index record that we start off with in our split node. We then determine the subsequent index record allocation by some heuristic.</p></div></article></div></section><section class="mb-8 mx-[5vw] rounded-[1rem] shadow-[0px_5px_15px_rgba(0,0,0,0.35)] h-fit relative bg-red undefined"><div class="h-fit"><article class="relative z-50 m-0 p-8 text-left max-w-[100%] h-fit rounded-2xl bg-white text-black undefined" id="Search Algorithm"><div><h2>Search Algorithm</h2><p>The search algorithm is what makes the R-Tree useful. The idea is to start with a small radius that we search around and continually grow this radius until we find the node we are looking for. In practice, we use a priority queue to store the index pointer/index record that is closest to the query. At each pop, we can either dump the contents of the index pointer into the priority queue or if we see an index record, that is the closest value to the query.</p></div></article></div></section><section class="mb-8 mx-[5vw] rounded-[1rem] shadow-[0px_5px_15px_rgba(0,0,0,0.35)] h-fit relative bg-red undefined"><div class="h-fit"><article class="relative z-50 m-0 p-8 text-left max-w-[100%] h-fit rounded-2xl bg-white text-black undefined" id="Delete Method"><div><h2>Delete Method</h2><p>The delete method is similar to the search method, but we delete a node once it has been found and propagate any bound changes up. If a node is underfull, we remove the node from the tree. After the delete operation, we reinsert all of its children.</p><div class="grid grid-cols-1 gap-4 items-center justify-center w-full max-w-[90%] mx-auto py-4 undefined"><img alt="rtree-2d-delete" loading="lazy" width="1000" height="800" decoding="async" data-nimg="1" class="w-full" style="color:transparent" src="/projects/SpatialIndexing/media/rtree-2d-delete.png"/></div><p>This means that the tree must be able to handle insertion of index pointers also. It is recommended that the minimum number of children is <span style="display:inline">\(40\%\)</span> of the max number of children of a tree node.</p><div class="grid grid-cols-1 gap-4 items-center justify-center w-full max-w-[90%] mx-auto py-4 undefined"><img alt="rtree-3d-delete" loading="lazy" width="1128" height="920" decoding="async" data-nimg="1" class="w-full" style="color:transparent" src="/projects/SpatialIndexing/media/rtree-3d-delete.png"/></div></div></article></div></section><section class="mb-8 mx-[5vw] rounded-[1rem] shadow-[0px_5px_15px_rgba(0,0,0,0.35)] h-fit relative bg-red undefined"><div class="h-fit"><article class="relative z-50 m-0 p-8 text-left max-w-[100%] h-fit rounded-2xl bg-white text-black undefined" id="R* Trees"><div><h2>R*-Trees</h2><p>R* Trees are very similar to R-Trees but considers two modifications. One problem with the R-Tree is once we insert, we are stuck with having to work around the bounds calculated from previous insertions. R* Trees solve this with an overflow method.</p><p>The second modification is in the splitting process. Rather than picking two seeds, we sort the objects along every dimension and choosing the split along the dimension that results in the least overlap.</p><p>There are also a couple smaller modifcations which try to ensure that the rectangular bounds of the tree nodes are as square as possible which results in a cleaner packing of bounds.</p></div></article></div></section><section class="mb-8 mx-[5vw] rounded-[1rem] shadow-[0px_5px_15px_rgba(0,0,0,0.35)] h-fit relative bg-red undefined"><div class="h-fit"><article class="relative z-50 m-0 p-8 text-left max-w-[100%] h-fit rounded-2xl bg-white text-black undefined" id="Overflow Treatment"><div><h2>Overflow Treatment</h2><p>If there are too many index records/index pointers in a leaf node/branch node after an insertion, we first attempt to reinsert all children back into the tree. This can cause some subsequent splitting, so we assert that this overflow can only happen once per level of the tree (prevent loops). If overflow has occurred, we do the usual tree split and propagation upwards.</p></div></article></div></section><section class="mb-8 mx-[5vw] rounded-[1rem] shadow-[0px_5px_15px_rgba(0,0,0,0.35)] h-fit relative bg-red undefined"><div class="h-fit"><article class="relative z-50 m-0 p-8 text-left max-w-[100%] h-fit rounded-2xl bg-white text-black undefined" id="Conclusion"><div><h2>Conclusion</h2><p>R*-Trees although not optimal in terms of keeping bound overlap minimal is known for being efficient enough in practice. If the distribution of the data is known before hand, there are methods to construct an R*-Tree through sorting and loading the data all in at once.</p></div></article></div></section></div><div class="block flex-grow max-w-[25%]"><div class="max-w-[80%] mx-auto h-full"><div class="sticky top-[20%] p-4 pl-6 border-1 border-black border-solid rounded-[1rem] bg-black shadow-[0px_5px_15px_rgba(0,0,0,0.35)] h-auto  max-h-[60vh] overflow-y-auto "><nav><ul><a class="block scale-90 hover:text-slate-300 transition-transform  duration-100 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 " href="#What are They?">What are They?</a></ul><ul><a class="block scale-90 hover:text-slate-300 transition-transform  duration-100 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 " href="#R-Trees">R-Trees</a></ul><ul><a class="block scale-90 hover:text-slate-300 transition-transform  duration-100 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 " href="#IndexRecords and IndexPointers">IndexRecords and IndexPointers</a></ul><ul><a class="block scale-90 hover:text-slate-300 transition-transform  duration-100 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 " href="#Leaf/Branch Nodes">Leaf/Branch Nodes</a></ul><ul><a class="block scale-90 hover:text-slate-300 transition-transform  duration-100 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 " href="#R-Tree Insert">R-Tree Insert</a></ul><ul><a class="block scale-90 hover:text-slate-300 transition-transform  duration-100 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 " href="#Splitting Nodes">Splitting Nodes</a></ul><ul><a class="block scale-90 hover:text-slate-300 transition-transform  duration-100 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 " href="#Search Algorithm">Search Algorithm</a></ul><ul><a class="block scale-90 hover:text-slate-300 transition-transform  duration-100 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 " href="#Delete Method">Delete Method</a></ul><ul><a class="block scale-90 hover:text-slate-300 transition-transform  duration-100 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 " href="#R* Trees">R* Trees</a></ul><ul><a class="block scale-90 hover:text-slate-300 transition-transform  duration-100 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 " href="#Overflow Treatment">Overflow Treatment</a></ul><ul><a class="block scale-90 hover:text-slate-300 transition-transform  duration-100 ease-in-out text-[1.1rem] hover:scale-100 focus:scale-100 " href="#Conclusion">Conclusion</a></ul></nav></div></div></div></div></div></div></div><footer class="w-full bg-black text-center p-4 text-white shadow-[0_-5px_15px_rgba(0,0,0,0.35)]"><div>&lt;&lt;&lt; © Trustin Nguyen &gt;&gt;&gt;</div><div><a class="text-white hover:text-gray-300 hover:scale-100 focus:text-gray-300 focus:scale-100" href="#"> <!-- -->Back to Top<!-- --> </a></div></footer></div><script src="/_next/static/chunks/webpack-9edee2920554d0a5.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[4547,[],\"ClientSegmentRoot\"]\n3:I[7249,[\"795\",\"static/chunks/795-77b345457a57fcf5.js\",\"177\",\"static/chunks/app/layout-232717e26759a58b.js\"],\"default\"]\n4:I[5244,[],\"\"]\n5:I[3866,[],\"\"]\n7:I[7033,[],\"ClientPageRoot\"]\n8:I[6687,[\"173\",\"static/chunks/173-ef7ddebb9db08982.js\",\"795\",\"static/chunks/795-77b345457a57fcf5.js\",\"970\",\"static/chunks/970-ed0831cff5c90225.js\",\"642\",\"static/chunks/app/projects/SpatialIndexing/page-75a073aafc703aca.js\"],\"default\"]\nb:I[6213,[],\"OutletBoundary\"]\nd:I[6213,[],\"MetadataBoundary\"]\nf:I[6213,[],\"ViewportBoundary\"]\n11:I[4835,[],\"\"]\n:HL[\"/_next/static/css/c1338e482ffbff7c.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"KYBN17uUdAUyOrU9ZqeJw\",\"p\":\"\",\"c\":[\"\",\"projects\",\"SpatialIndexing\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"projects\",{\"children\":[\"SpatialIndexing\",{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/c1338e482ffbff7c.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L2\",null,{\"Component\":\"$3\",\"slots\":{\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[],[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]},\"params\":{},\"promise\":\"$@6\"}]]}],{\"children\":[\"projects\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"projects\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"SpatialIndexing\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"projects\",\"children\",\"SpatialIndexing\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[[\"$\",\"$L7\",null,{\"Component\":\"$8\",\"searchParams\":{},\"params\":\"$0:f:0:1:1:props:children:1:props:params\",\"promises\":[\"$@9\",\"$@a\"]}],null,[\"$\",\"$Lb\",null,{\"children\":\"$Lc\"}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"YamakviRYFWoQ3j5_6eel\",{\"children\":[[\"$\",\"$Ld\",null,{\"children\":\"$Le\"}],[\"$\",\"$Lf\",null,{\"children\":\"$L10\"}],null]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$11\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"6:{}\n9:{}\na:{}\n"])</script><script>self.__next_f.push([1,"10:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\ne:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"link\",\"1\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}]]\n"])</script><script>self.__next_f.push([1,"c:null\n"])</script></body></html>